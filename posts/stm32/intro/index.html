<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Brief information about Cortex-M ARM-based STM32 MCUs and STM32 CubeIDE to get started with new embedded systems"><link href=https://www.codeinsideout.com/posts/stm32/intro/ rel=canonical><meta name=author content=vuquangtrong@gmail.com><link rel="shortcut icon" href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.6"><title>Introduction to STM32 MCUs - Code Inside Out</title><link rel=stylesheet href=../../../assets/stylesheets/main.6910b76c.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.196e0c26.min.css><link rel=stylesheet href=../../../stylesheets/base.css><link rel=stylesheet href=../../../stylesheets/kbd.css><link rel=stylesheet href=../../../stylesheets/progressbar.css><link rel=stylesheet href=../../../stylesheets/main.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Merriweather:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>
            body,
            input {
                font-family:"Roboto", -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif
            }
            code,
            kbd,
            pre {
                font-family:"Roboto Mono", SFMono-Regular, Consolas, Menlo, monospace
            }
            
                /* Use different fonts for better reading and printing */
                .page-content {
                    font-family:"Merriweather", -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif
                }
                .page-content code,
                .page-content kbd,
                .page-content pre {
                    font-family:"Roboto Mono", SFMono-Regular, Consolas, Menlo, monospace
                }
            
        </style><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-42618265-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property=og:type content=website><meta property=og:title content="Code Inside Out - Introduction to STM32 MCUs"><meta property=og:description content="Brief information about Cortex-M ARM-based STM32 MCUs and STM32 CubeIDE to get started with new embedded systems"><meta content=https://www.codeinsideout.com/posts/stm32/intro/ property=og:url><meta property=og:image content=https://www.codeinsideout.com/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@vqtrong><meta name=twitter:creator content=@vqtrong><meta name=twitter:title content="Code Inside Out - Introduction to STM32 MCUs"><meta name=twitter:description content="Brief information about Cortex-M ARM-based STM32 MCUs and STM32 CubeIDE to get started with new embedded systems"><meta name=twitter:image content=https://www.codeinsideout.com/assets/images/banner.png></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction-to-stm32-mcus class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://www.codeinsideout.com/ title="Code Inside Out" class="md-header-nav__button md-logo" aria-label="Code Inside Out"> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Code Inside Out </span> <span class="md-header-nav__topic md-ellipsis"> Introduction to STM32 MCUs </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../projects/ class=md-tabs__link> Projects </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Posts </a> </li> <li class=md-tabs__item> <a href=../../../about/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../tags/ class=md-tabs__link> Tags </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://www.codeinsideout.com/ title="Code Inside Out" class="md-nav__button md-logo" aria-label="Code Inside Out"> <img src=../../../assets/logo.png alt=logo> </a> Code Inside Out </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../projects/ class=md-nav__link> Projects </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Posts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Posts data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Posts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Featured posts </a> </li> <li class=md-nav__item> <a href=../../markdown_syntax/ class=md-nav__link> Markdown Syntax </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3 checked> <label class=md-nav__link for=nav-3-3> Stm32 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Stm32 data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"></span> Stm32 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Introduction to STM32 MCUs <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Introduction to STM32 MCUs </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#arm-based-processors class=md-nav__link> ARM Based Processors </a> <nav class=md-nav aria-label="ARM Based Processors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-registers class=md-nav__link> Core Registers </a> </li> <li class=md-nav__item> <a href=#memory-map class=md-nav__link> Memory Map </a> </li> <li class=md-nav__item> <a href=#exceptions-handling class=md-nav__link> Exceptions Handling </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stm32-mcus class=md-nav__link> STM32 MCUs </a> <nav class=md-nav aria-label="STM32 MCUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mcu-families class=md-nav__link> MCU Families </a> </li> <li class=md-nav__item> <a href=#select-your-mcu class=md-nav__link> Select your MCU </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stm32cubeide class=md-nav__link> STM32CubeIDE </a> <nav class=md-nav aria-label=STM32CubeIDE> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-new-project class=md-nav__link> Create a new project </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documents class=md-nav__link> Related documents </a> <nav class=md-nav aria-label="Related documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#board-manual--schematic class=md-nav__link> Board Manual &amp; Schematic </a> </li> <li class=md-nav__item> <a href=#processor-datasheet class=md-nav__link> Processor Datasheet </a> </li> <li class=md-nav__item> <a href=#library-manual class=md-nav__link> Library Manual </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> Conclusion </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../semihost/ class=md-nav__link> Semihosting on ARM MCUs </a> </li> <li class=md-nav__item> <a href=../toolchain/ class=md-nav__link> ARM Toolchain & Makefile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Tags <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tags data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> Tags </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tags/ class=md-nav__link> Tags </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#arm-based-processors class=md-nav__link> ARM Based Processors </a> <nav class=md-nav aria-label="ARM Based Processors"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-registers class=md-nav__link> Core Registers </a> </li> <li class=md-nav__item> <a href=#memory-map class=md-nav__link> Memory Map </a> </li> <li class=md-nav__item> <a href=#exceptions-handling class=md-nav__link> Exceptions Handling </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stm32-mcus class=md-nav__link> STM32 MCUs </a> <nav class=md-nav aria-label="STM32 MCUs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mcu-families class=md-nav__link> MCU Families </a> </li> <li class=md-nav__item> <a href=#select-your-mcu class=md-nav__link> Select your MCU </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#stm32cubeide class=md-nav__link> STM32CubeIDE </a> <nav class=md-nav aria-label=STM32CubeIDE> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-new-project class=md-nav__link> Create a new project </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documents class=md-nav__link> Related documents </a> <nav class=md-nav aria-label="Related documents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#board-manual--schematic class=md-nav__link> Board Manual &amp; Schematic </a> </li> <li class=md-nav__item> <a href=#processor-datasheet class=md-nav__link> Processor Datasheet </a> </li> <li class=md-nav__item> <a href=#library-manual class=md-nav__link> Library Manual </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> Conclusion </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <div class=page-content> <h1 id=introduction-to-stm32-mcus>Introduction to STM32 MCUs<a class=headerlink href=#introduction-to-stm32-mcus title="Permanent link">⚓︎</a></h1> <h2 id=arm-based-processors>ARM Based Processors<a class=headerlink href=#arm-based-processors title="Permanent link">⚓︎</a></h2> <p>ARM processors use <em>Reduced Instruction Set Computing</em> (RISC) architectures, and nowaday have many revisions (ARMv6, ARMv6-M, ARMv7, ARMv7-A, etc.,). An ARM architecture is a set of specifications regarding the <em>instruction set</em>, the execution model, the memory organization and layout, the instruction cycles and more, which describes precisely a machine that will implement said architecture.</p> <p>ARM Cortex is a wide set of 32/64-bit architectures and cores really popular in the embedded world. Cortex microcontrollers are divided into three main subfamilies:</p> <ul> <li> <p>Cortex-A, which stands for Application, is a series of processors providing a range of solutions for devices undertaking complex computing tasks, such as hosting a rich Operating System (OS) platform (Linux and its derivative Android are the most common ones), and supporting multiple software applications.</p> </li> <li> <p>Cortex-M, which stands for eMbedded, is a range of scalable, compatible, energy efficient and easy to use processors designed for the low-cost embedded market. The Cortex-M family is optimized for cost and power sensitive MCUs suitable for single applications on small devices.</p> </li> <li> <p>Cortex-R, which stand for Real-Time, is a series of processors offering high-performance computing solutions for embedded systems where reliability, high availability, fault tolerance, maintainability and deterministic real-time response are essential.</p> </li> </ul> <h3 id=core-registers>Core Registers<a class=headerlink href=#core-registers title="Permanent link">⚓︎</a></h3> <p>Like all RISC architectures, Cortex-M processors perform operations on CPU <em>registers</em> and load/save data from/to memory locations. There are some <em>General Purpose Registers</em> numbered as <em>R0</em> to <em>R12</em> and some <em>Specific Registers</em> have alias names such as <em>R13 (Stack Pointer)</em> or <em>R15 (Program Counter)</em>.</p> <p> <figure class=w80><img src=arm_cortex_m_registers.png><figcaption>ARM Contex-M Registers</figcaption></figure> </p> <h3 id=memory-map>Memory Map<a class=headerlink href=#memory-map title="Permanent link">⚓︎</a></h3> <p>ARM defines a standardized memory address space common to all Cortex-M cores, which ensures code portability among different silicon manufacturer. The address space is 4 GB wide, and it is organized in several sub-regions with different logical functionalities, such as the first 512 MB are dedicated to code area.</p> <p>All Cortex-M processors map the code area starting at address <code>0x00000000</code> which has the pointers to the beginning of the <em>Stack</em>, to the <em>Reset Handler</em>, and <em>Vectore Table</em> for MCUs to start. The internal MCU flash memory is the area where program code resides, and it locates at <code>0x08000000</code>. In the Code Area, there are Flash space, System Memory (in ROM) space, and Options Bytes (in Flash) space, which are used for storing firmware code, bootloader, and system configurations.</p> <p>Depending on BOOT configuration (BOOT pins, and Boot Option in Option Bytes), system will boot from either SRAM, or FLash, or System Memory. Because system always boots at the startup address <code>0x00000000</code>, there is a mapping method to make SRAM, Flash, or System Memory be aliased from the startup address. It means, fox example, data on the aliased Flash area with offset <code>0x00001234</code> can be refered from either the ogirinal address <code>0x08001234</code> or from the aliased address <code>0x00001234</code>.</p> <p> <figure class=w80><img src=arm_cotext_m_memory_map.png><figcaption>ARM Cortex-M Memory Map</figcaption></figure> </p> <p> <figure class=w70><img src=arm_cortex_m_memory_map_code_area.png><figcaption>ARM Cortex-M Memory Map in Code Area</figcaption></figure> </p> <div class=new-page></div> <h3 id=exceptions-handling>Exceptions Handling<a class=headerlink href=#exceptions-handling title="Permanent link">⚓︎</a></h3> <p><em>Interrupts</em> and <em>Exceptions</em> are asynchronous events that alter the program flow. When an exception or an interrupt occurs, the CPU suspends the execution of the current task, saves its context (that is, its stack pointer) and starts the execution of a routine designed to handle the interrupting event. This routine is called <em>Exception Handler</em> in case of exceptions and <em>Interrupt Service Routine</em> (ISR) in case of an interrupt. After the exception or interrupt has been handled, the CPU resumes the previous execution flow, and the previous task can continue its execution.</p> <p>In the ARM architecture, interrupts are one type of exception. Interrupts are usually generated from on-chip peripherals (e.g., a timer) or external inputs (e.g. a tactile switch connected to a GPIO), and in some cases they can be triggered by software. Exceptions are, instead, related to software execution, and the CPU itself can be a source of exceptions. These could be fault events such as an attempt to access an invalid memory location, or events generated by the Operating System, if any.</p> <p>Each exception (and hence interrupt) has a number which uniquely identifies it. This number reflects the position of the exception handler routine inside the vector table, where the actual address of the routine is stored.</p> <table> <thead> <tr> <th>Number</th> <th>Exception Type</th> <th>Priority</th> <th>Function</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Reset</td> <td>-3</td> <td>Reset Handler</td> </tr> <tr> <td>2</td> <td>NMI</td> <td>-2</td> <td>Non-maskable Interrupt</td> </tr> <tr> <td>3</td> <td>Hard Fault</td> <td>-1</td> <td>All classes of Fault which is not handled</td> </tr> <tr> <td>4</td> <td>Memory Management</td> <td>Configurable</td> <td>MPU Fault</td> </tr> <tr> <td>5</td> <td>Bus Fault</td> <td>Configurable</td> <td>Pre-fetch or Memory access Fault</td> </tr> <tr> <td>6</td> <td>Usage Fault</td> <td>Configurable</td> <td>Undefined instruaction or Illegal state</td> </tr> <tr> <td>7~10</td> <td>-</td> <td>-</td> <td>Reserved</td> </tr> <tr> <td>11</td> <td>SVCall</td> <td>Configurable</td> <td>System Call</td> </tr> <tr> <td>12</td> <td>Debug Monitor</td> <td>Configurable</td> <td>Software-based Debugger</td> </tr> <tr> <td>13</td> <td>-</td> <td>-</td> <td>Reserved</td> </tr> <tr> <td>14</td> <td>Pending SV</td> <td>Configurable</td> <td>Pending request for System Service</td> </tr> <tr> <td>15</td> <td>SysTick</td> <td>Configurable</td> <td>System Timer has fired every tick</td> </tr> <tr> <td>16~</td> <td>IRQ</td> <td>Configurable</td> <td>Interrupt Request</td> </tr> </tbody> </table> <h4>CMIS</h4> <p><em>Cortex Microcontroller Software Interface Standard</em> (CMSIS) is a vendor-independent hardware abstraction layer for the Cortex-M processor series and specifies debugger interfaces. The CMSIS consists of the following components:</p> <ul> <li> <p>CMSIS-CORE: API for the Cortex-M processor core and peripherals. It provides a standardized interface for Cortex-M0/3/4/7</p> </li> <li> <p>CMSIS-Driver: defines generic peripheral driver interfaces for middleware making them reusable across supported devices. The API is RTOS independent and connects microcontroller peripherals to middleware which implements, amongst other things, communication stacks, file systems or graphical user interfaces</p> </li> <li> <p>CMSIS-RTOS: Common APIs for <em>Real-Time Operating Systems</em>. It provides a standardized programming interface which is portable to many RTOS and therefore enables software templates, middleware, libraries, and other components which can work across supported RTOS systems.</p> </li> </ul> <h2 id=stm32-mcus>STM32 MCUs<a class=headerlink href=#stm32-mcus title="Permanent link">⚓︎</a></h2> <h3 id=mcu-families>MCU Families<a class=headerlink href=#mcu-families title="Permanent link">⚓︎</a></h3> <p>STM32 is a broad range of microcontrollers divided in nine sub-families, each one with its features. Internally, each microcontroller consists of the processor core, static RAM, flash memory, debugging interface, and various other peripherals. Some MCUs provide additional types of memory (EEPROM, CCM, etc.), and a whole line of devices targeting low-power applications is continuously growing.</p> <ol> <li> <p>Cortex-M based MCUs with large community, free tool-chain, and many shared knowledge articles.</p> </li> <li> <p>Pin-to-Pin compatibility for most of STM32 MCUs, which helps you to change the MCU while keeping pin assignments</p> </li> <li> <p>5 V tolerant means you can interface with other devices which do not use 3.3 V without using level shifter.</p> </li> <li> <p>Cheap is an advantage of using STM32 MCUs with ARM based processors and supported RTOS.</p> </li> <li> <p>Integrated bootloader is shipped with internal ROM which allows to reprogram the internal flash memory using some communication peripherals (USART, I²C, etc.)</p> </li> </ol> <div class=row> <div class=col> <p> <figure class=w80><img src=stm32f051_disco_board.png><figcaption>STM32 F051 Discovery Board</figcaption></figure> </p> </div> <div class=col> <p> <figure><img src=stm32l0538_disco_board.png><figcaption>STM32 L0538 Discovery Board</figcaption> </figure> </p> </div> </div> <p> <figure><img src=stm32_nucleo_boards.png><figcaption>STM32 Nucleo family boards</figcaption> </figure> </p> <p>You can choose any board to try but it is recommended to start with F0 families as it is easy to learn with small number of pins, and then you can move to F4 families to learn most of available features in STM32 MCUs.</p> <p>Here is some brieft information about STM32 MCUs families:</p> <table> <thead> <tr> <th>STM32 Families</th> <th>Features</th> </tr> </thead> <tbody> <tr> <td rowspan=4>F0</td> <td>ARM Cortex-M0 core at a maximum clock rate of 48 MHz</td> </tr> <tr> <td>Upto 32 KB SRAM, 256 KB Flash</td> </tr> <tr> <td rowspan=2>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr></tr> <tr> <td rowspan=5>F1</td> <td>ARM Cortex-M3 core at a maximum clock rate ranging from 24 MHz to 72 MHz</td> </tr> <tr> <td>Upto 96 KB SRAM, 256 KB Flash, 4 KB Backup Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td rowspan=2>Upto 80 fast I/Os, 5 V tolerant</td> </tr> <tr></tr> <tr> <td rowspan=5>F2</td> <td>ARM Cortex-M3 core at a maximum clock rate of 120 MHz</td> </tr> <tr> <td>Upto 128 KB SRAM, 1024 KB Flash, 4 KB Backup Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td rowspan=2>Upto 136 fast I/Os, 5 V tolerant</td> </tr> <tr></tr> <tr> <td rowspan=9>F3</td> <td>ARM Cortex-M4F core at a maximum clock rate of 72 MHz</td> </tr> <tr> <td>Upto 80 KB SRAM, 512 KB Flash, 128 B Backup Memory, 8 KB Core Coupled Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Upto 136 fast I/Os, 5 V tolerant</td> </tr> <tr> <td>Ultra-fast comparators (25 ns)</td> </tr> <tr> <td>Op-amp with programmable gain</td> </tr> <tr> <td>Ultra-fast 12-bit ADCs</td> </tr> <tr> <td rowspan=2>Precise 16-bit sigma-delta ADC</td> </tr> <tr></tr> <tr> <td rowspan=6>F4</td> <td>ARM Cortex-M4F core at a maximum clock ranging from 84 to 180 MHz</td> </tr> <tr> <td>Upto 384 KB SRAM, 2048 KB Flash, 64 KB Coupled Memory, 4 KB Backup Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Upto 136 fast I/Os, 5 V tolerant</td> </tr> <tr> <td rowspan=2>I2S and Audio PLL</td> </tr> <tr></tr> <tr> <td rowspan=6>F7</td> <td>ARM Cortex-M7 core at a maximum clock of 216 MHz</td> </tr> <tr> <td>Upto 512 Kb SRAM, 2048 KB Flash, 16 KB + 16 KB L1 Cache</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Upto 164 fast I/Os, 5 V tolerant</td> </tr> <tr> <td rowspan=2>Double-precision FPU, SAI, Audio PLL, CAN, USB OTG, HDMI-ECE, Ethernet</td> </tr> <tr></tr> <tr> <td rowspan=7>H7</td> <td>ARM Cortex-M7 core at a maximum clock of 400 MHz</td> </tr> <tr> <td>Upto 1024 KB SRAM, 2048 KB Flash, 16 KB + 16 KB L1 Cache</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Upto 164 fast I/Os, 5 V tolerant</td> </tr> <tr> <td>14-bit ADC, SAI, Double-precision FPU, CAN, Audio PLL</td> </tr> <tr> <td rowspan=2>Support to SDMMC and FSMC interfaces</td> </tr> <tr></tr> <tr> <td rowspan=6>L0</td> <td>ARM Cortex-M0+ core at a maximum clock rate of 32 MHz</td> </tr> <tr> <td>Upto 8 KB SRAM, 64 KB Flash, 20 B Backup Memory, 2 KB EEPROM</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Ultra-low-power mode + backup register: 250 nA</td> </tr> <tr> <td rowspan=2>Wake-up time: 3.5 µs</td> </tr> <tr></tr> <tr> <td rowspan=6>L1</td> <td>ARM Cortex-M3 core with FPU at a maximum clock rate of 32 MHz</td> </tr> <tr> <td>Upto 320 KB SRAM, 1024 KB Flash, 20 B Backup Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Ultra-low-power mode + backup register: 250 nA</td> </tr> <tr> <td rowspan=2>Wake-up time: 3.5 µs</td> </tr> <tr></tr> <tr> <td rowspan=6>L4</td> <td>ARM Cortex-M4F core with FPU at a maximum clock rate of 80 MHz</td> </tr> <tr> <td>Upto 320 KB SRAM, 1024 KB Flash, 20 B Backup Memory</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Support to SDMMC and FSMC interfaces</td> </tr> <tr> <td rowspan=2>Ultra-low-power mode: 30 nA baseline of current comsumption</td> </tr> <tr></tr> <tr> <td rowspan=8>L4+</td> <td>ARM Cortex-M4F core with FPU at a maximum clock rate of 120 MHz.</td> </tr> <tr> <td>Upto 640 KB SRAM, 2048 KB Flash</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Support to SDMMC and FSMC interfaces</td> </tr> <tr> <td>Ultra-low-power mode: 20 nA baseline of current comsumption</td> </tr> <tr> <td>Wake-up time: 5 μs.</td> </tr> <tr> <td rowspan=2>Dynamic run mode: down to 43 μA/MHz.</td> </tr> <tr></tr> <tr> <td rowspan=9>WB</td> <td>ARM Cortex-M4F core with FPU at a maximum clock rate of 64 MHz, or</td> </tr> <tr> <td>ARM Cortex-M0+ core a maximum clock rate of 32 MHz</td> </tr> <tr> <td>Upto 256 KB SRAM, 1024 KB Flash</td> </tr> <tr> <td>Basic Peripherals (WDT, CRC, RTC, TMR, ADC, DMA, USART, SWD, SPI, I2C)</td> </tr> <tr> <td>Support to Quad-SPI interface</td> </tr> <tr> <td>BLE 5.0 compatible radio front-end and stack.</td> </tr> <tr> <td>IEEE 802.15.4 compatible radio front-end</td> </tr> <tr> <td rowspan=2>ART(tm) Accelerator</td> </tr> <tr></tr> </tbody> </table> <h3 id=select-your-mcu>Select your MCU<a class=headerlink href=#select-your-mcu title="Permanent link">⚓︎</a></h3> <ul> <li> <p>If you are going to develop a <em>CPU intensive application</em>, focused on multimedia and graphic applications, then you have to shift our attention to the <em>High-Performance</em> group of STM32 microcontrollers. </p> </li> <li> <p>If, on the other hand, the <em>computing power</em> is not the main requirement of our electronic device, you can focus on the <em>Mainstream</em> segment, giving a close look at the STM32F1 series which offers the most extensive selection to choose from.</p> </li> <li> <p>If you need to interact with the external world through an <em>Ethernet connection</em> or other industrial protocols such as a <em>CAN bus</em>, and our application has to be responsive and able to deal with several <em>Internet Protocols</em>, then the <em>STM32F4</em> portfolio is probably your best option.</p> </li> <li> <p>If you are going to develop a <em>battery-powered</em> device, then you have to look at the <em>STM32L</em> selection.</p> </li> </ul> <h2 id=stm32cubeide>STM32CubeIDE<a class=headerlink href=#stm32cubeide title="Permanent link">⚓︎</a></h2> <p>While there are many <em>Integrated Development Environment</em> (IDE) software can be used to develop applications on ARM Cortex-M MCUs, ST has their own free <em>STM32CubeIDE</em>, easy-to-use, fully-featured IDE for STM32 MCUs.</p> <p>STM32CubeIDE is an advanced C/C++ development platform with <strong>peripheral configuration</strong>, <strong>code generation</strong>, <strong>code navigation</strong>, <strong>code compilation</strong>, <strong>programmer</strong> and <strong>debugger</strong> for STM32 microcontrollers and microprocessors. It is based on the <em>Eclipse®/CDT</em> framework and <em>GCC</em> toolchain for the development, and <em>GDB</em> for the debugging. It allows the integration of the hundreds of existing plugins that complete the features of the Eclipse® IDE.</p> <blockquote> <p>Download at: <a href=https://www.st.com/en/development-tools/stm32cubeide.html>https://www.st.com/en/development-tools/stm32cubeide.html</a></p> <p>STM32CubeIDE is a complete toolchain for ST's STM32 MCUs, you can read more about <a href=../toolchain/ >ARM Toolchain &amp; Makefile</a>.</p> </blockquote> <h5>Key Features</h5> <ul> <li>Integration of services from STM32CubeMX:<ul> <li>STM32 microcontroller, microprocessor, development platform and example project selection</li> <li>Pinout, clock, peripheral, and middleware configuration</li> <li>Project creation and generation of the initialization code</li> <li>Software and middleware completed with enhanced STM32Cube Expansion Packages</li> </ul> </li> <li>Based on Eclipse®/CDT, with support of Eclipse® add-ons, GNU C/C++ for Arm® toolchain and GDB debugger</li> <li>Additional advanced debug features including:<ul> <li>CPU core, peripheral register, and memory views</li> <li>Live variable watch view</li> <li>System analysis and real-time tracing (SWV)</li> <li>CPU fault analysis tool</li> </ul> </li> <li>Support of ST-LINK (STMicroelectronics) and J-Link (SEGGER) debug probes</li> <li>Import project from Atollic® TrueSTUDIO® and AC6 System Workbench for STM32 (SW4STM32)</li> <li>Multi-OS support: Windows®, Linux®, and macOS®, 64-bit versions only</li> </ul> <h3 id=create-a-new-project>Create a new project<a class=headerlink href=#create-a-new-project title="Permanent link">⚓︎</a></h3> <ol> <li> <p><strong>Start new project</strong></p> <p>It is recommended to start a new project with STM32CudeIDE as it will automatically configure your project for your target MCU. you also can convert other type of projects to STM32CudeIDE project. Sometimes, you have to re-configure settings manually if the IDE cannot do it for you.</p> <p> <figure class=w60><img src=ide_start.png><figcaption>Welcome screen of STM32CudeIDE</figcaption></figure> </p> </li> <li> <p><strong>Choose the target MCU</strong></p> <p>You can search for your target MCU by using Selectors: MCU/MPU Name, Board, Example, or Custome Filters.</p> <p> <figure class=w80><img src=ide_select_target.png><figcaption>Select your target MCU</figcaption></figure> </p> </li> <li> <p><strong>Select Firmware Library Package</strong></p> <p>You will be able to choose the <em>Targeted Language</em> as C or C++, <em>Binary Type</em>, and the <em>Firmware Package</em></p> <p> <figure class=w80><img src=ide_setup_project.png><figcaption>Setup settings for a new project</figcaption></figure> </p> <div class="admonition note"> <p>At the beginning level, it is recommended to let STM32CubeIDE initialize all peripherals with their default mode. If you select a discovery board, the IDE will assign pins and generate code based on the settings on your selected boards, such as LEDs, Buttons, and Serial Wire Debug (SWD).</p> </div> </li> <li> <p><strong>Configuire target device</strong></p> <p>You will be started with <em>Device Configuration Tool</em> which is known as <em>STM32CubeMX</em> to start setting up your MCU with interactive components.</p> <p>The first tab is <kbd class=menu> Pinout &amp; Configuration </kbd> in which you can select on available modules to configure them. <em>Pinout View</em> is a greate view to see the pin assignment for your MCU. you can quickly assign a function to a pin by <kbd class=action>left click</kbd> on that pin. There will be a popup with a list of functions which can be assigned. If you <kbd class=action>right click</kbd> on the pin, you can assign a readable friendly name for it.</p> <p> <figure class=w60><img src=ide_pin_assignment.png><figcaption>Pin assignment</figcaption></figure> </p> <p>If you click on a specific module, there is a detail page for you to config that modules, including Name, Pin, Pin Type, Interrupt, DMA, or any other available settings.</p> <p> <figure class=w80><img src=ide_gpio_config.png><figcaption>GPIO configuration</figcaption></figure> </p> <p>The <em>Clock Configuration</em> show the clock paths across your devices from the clock source to the modules. It also allows you to change the multiplier of clock path to increase or decrease the clock frequence.</p> <p> <figure class=w80><img src=ide_clock_config.png><figcaption>Clock Configuration</figcaption></figure> </p> <p>In the <em>Project Manager</em> tab, you can change some advanced functions of STM32CudeMX such as the size of Heap and Stack, Code Generation. You should leave them default unless you understand about these settings.</p> <p> <figure class=w80><img src=ide_project_manager.png><figcaption>Project Manager </figcaption></figure> </p> </li> <li> <p><strong>Generate Code</strong></p> <p>If you save your project (<kbd class=button>Ctrl</kbd>+<kbd class=button>S</kbd>) in <em>Device Confirguration Tool</em> it will automatically generate code for you, based on your settings. you can press <kbd class=button>Alt</kbd>+<kbd class=button>K</kbd> or choose the menu <kbd class=menu>Project &gt; Generate Code</kbd> too.</p> <p>When you choose to use a Firmware Library in your project, IDE automatically uses ST Hardware Abstract Layer (HAL) library as the main way of controlling your processor. HAL also makes use of CMSIS library to access processor's registers.</p> <p>Let's an example of using STM32F0 MCU:</p> <p>Code dependency starts from your <code>startup_stm32f0xx.s</code> file. This file include <code>main.h</code> which then includes HAL files which eventually include CMSIS files. The startup file also call to your <code>main</code> function in <code>main.c</code> to run your program.</p> <p> <figure><img src=ide_generated_code_structure.png><figcaption>Generated Code Structure</figcaption> </figure> </p> <p><style>
    #table1 table,
    #table2 table {
        table-layout: fixed;
    }
</style> <div markdown=1 id=table1></p> <table> <thead> <tr> <th>File</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>stm32f0xx_hal.h</code></td> <td>This file is used for HAL initialization and contains DBGMCU, Time Delay based on SysTick APIs. This also include <code>stm32f0xx_hal_def.h</code></td> </tr> <tr> <td><code>stm32f0xx_hal_def.h</code></td> <td>Common HAL resources such as common define statements, enumerations, structures and macros. This includes CMSIS. headers</td> </tr> <tr> <td><code>stm32f0xx_hal_ppp.h/.c</code></td> <td>Main peripheral/module driver file. It includes the APIs that are common to all STM32 devices. Example: <code>stm32f0xx_hal_adc.c</code>, <code>stm32f0xx_hal_irda.c</code>.</td> </tr> <tr> <td><code>stm32f0xx_hal_ppp_ex.h/.c</code></td> <td>Extension file of the peripheral/module <code>ppp</code> driver. It includes the specific APIs for a given part number or family, as well as the newly defined APIs that overwrite the default generic APIs if the internal process is implemented in different way. Example:<code>stm32f0xx_hal_adc_ex.c</code>,<code>stm32f0xx_hal_flash_ex.c</code>.</td> </tr> </tbody> </table> <p></div> The minimum files required to build an application using the HAL are listed in the table below:</p> <div markdown=1 id=table2> <table> <thead> <tr> <th>File</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>startup_stm32f0xx.s</code></td> <td>Toolchain specific file that contains reset handler and exception vectors. For some toolchains, it allows adapting the stack/heap size to fit the application requirements</td> </tr> <tr> <td><code>system_stm32f0xx.c</code></td> <td>This file contains <code>SystemInit()</code> which is called at startup just after reset and before branching to the main program. It does not configure the system clock at startup (contrary to the standard library). This is to be done using the HAL APIs in the user files. It allows relocating the vector table in internal SRAM.</td> </tr> <tr> <td><code>stm32f0xx_hal_conf.h</code></td> <td>This file allows the user to customize the HAL drivers for a specific application. It is not mandatory to modify this configuration. The application can use the default configuration without any modification. This call to STM32F0 HAL headers.</td> </tr> <tr> <td><code>stm32f0xx_hal_msp.c</code></td> <td>This file contains the MSP initialization and de-initialization (main routine and callbacks) of the peripheral used in the user application.</td> </tr> <tr> <td><code>stm32f0xx_it.h/.c</code></td> <td>This file contains the exceptions handler and peripherals interrupt service routine, and calls <code>HAL_IncTick()</code> at regular time intervals to increment a local variable (declared in <code>stm32f0xx_hal.c</code>) used as HAL timebase. By default, this function is called each 1ms in Systick ISR. The <code>PPP_IRQHandler()</code> routine must call <code>HAL_PPP_IRQHandler()</code> if an interrupt based process is used within the application.</td> </tr> <tr> <td><code>main.h/.c</code></td> <td>This file contains the main program routine, mainly:<br>• Call to <code>HAL_Init()</code><br>• <code>assert_failed()</code> implementation<br>• system clock configuration<br>• peripheral HAL initialization and user application code.</td> </tr> </tbody> </table> </div> </li> <li> <p><strong>Write your code</strong> The generayed code has some block marked with pairs of comments <code>/* USER CODE BEGIN */</code> and <code>/* USER CODE END */</code>. Inside those pairs, you can write your code and they will be untouched by STM32CubeMX when it it re-generates new code.</p> <p>For example:</p> <p class=file>main.c</p> <div class=highlight><pre><span></span><code><span class=cm>/* Private includes */</span>
<span class=cm>/* USER CODE BEGIN Includes */</span>
    <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
    <span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp></span>
<span class=cm>/* USER CODE END Includes */</span>

<span class=cm>/* Private define */</span>
<span class=cm>/* USER CODE BEGIN PD */</span>
    <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
    <span class=cp>#define SECRET_NUMBER 0x12345678</span>
<span class=cm>/* USER CODE END PD */</span>

<span class=cm>/* Private variables */</span>
<span class=cm>/* USER CODE BEGIN PV */</span>
    <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
    <span class=kt>uint8_t</span> <span class=n>key</span> <span class=o>=</span> <span class=mh>0xFF</span><span class=p>;</span>
<span class=cm>/* USER CODE END PV */</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>void</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>HAL_Init</span><span class=p>();</span>
    <span class=n>SystemClock_Config</span><span class=p>();</span>
    <span class=n>MX_GPIO_Init</span><span class=p>();</span>

    <span class=cm>/* Infinite loop */</span>
    <span class=cm>/* USER CODE BEGIN WHILE */</span>
    <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
    <span class=n>HAL_GPIO_WritePin</span><span class=p>(</span><span class=n>Green_Led_GPIO_Port</span><span class=p>,</span> <span class=n>Green_Led_Pin</span><span class=p>,</span> <span class=n>GPIO_PIN_SET</span><span class=p>);</span>
    <span class=k>while</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
        <span class=n>HAL_GPIO_TogglePin</span><span class=p>(</span><span class=n>Blue_Led_GPIO_Port</span><span class=p>,</span> <span class=n>Blue_Led_Pin</span><span class=p>);</span>
        <span class=n>HAL_Delay</span><span class=p>(</span><span class=mi>1000</span><span class=p>);</span>
        <span class=cm>/* USER CODE END WHILE */</span>

        <span class=cm>/* USER CODE BEGIN 3 */</span>
        <span class=o>&lt;</span><span class=n>YOUR</span> <span class=n>CODE</span> <span class=n>HERE</span><span class=o>&gt;</span>
    <span class=p>}</span>
    <span class=cm>/* USER CODE END 3 */</span>
<span class=p>}</span>
</code></pre></div> </li> <li> <p><strong>Run on board</strong></p> <p>First, you must compile your code by press <kbd class=button>Ctrl</kbd>+<kbd class=button>B</kbd>, or menu <kbd class=menu>Project &gt; Build Project</kbd></p> <p> <figure><img src=ide_memory_report.png><figcaption>Memory report after compilation</figcaption> </figure> </p> <p>Then after you connect the cable from your board to your computer, press <kbd class=button>F11</kbd> or <kbd class=menu>Run &gt; Debug</kbd> to download your code to board and start debugging session.</p> <p>Your application will paused at the <code>main()</code> function by default. Press <kbd class=button>F8</kbd> to <em>Resume</em>.</p> </li> </ol> <h2 id=related-documents>Related documents<a class=headerlink href=#related-documents title="Permanent link">⚓︎</a></h2> <div class=row> <div class=col> <p>In embedded programming, documents have a very important role as they are the main reference source for developer to know how the processor works and how to configure it. Those documents mainly come from the processsor manufacture, it means you can download it from the manufacture website. STM32CudeIDE has a better way to list all related documents of selected processor, and it can download documents for you. you can find the documents in menu <kbd class=menu>Help &gt; Target device docs and resources</kbd>.</p> </div> <div class=col> <p> <figure class=w80><img src=ide_show_documents.png><figcaption>Open documents browser</figcaption></figure> </p> </div> </div> <p> <figure><img src=ide_mcu_documents.png><figcaption>Related documents for selected STM32F051R8 MCUs</figcaption> </figure> </p> <p><strong>Here is the list of important documents you have to read in order to understand about the processor and its peripherals:</strong></p> <blockquote> <p>Example documents are for <code>STM32F051</code> MCUs.</p> </blockquote> <h3 id=board-manual--schematic>Board Manual &amp; Schematic<a class=headerlink href=#board-manual--schematic title="Permanent link">⚓︎</a></h3> <div class="admonition tip"> <p class=admonition-title>UM1525 - Discovery kit for STM32F0 microcontrollers</p> <p><a href=https://my.st.com/resource/en/user_manual/dm00050135-stm32f0discovery-discovery-kit-for-stm32-f0-microcontrollers-stmicroelectronics.pdf>https://my.st.com/resource/en/user_manual/dm00050135-stm32f0discovery-discovery-kit-for-stm32-f0-microcontrollers-stmicroelectronics.pdf</a></p> <p>Main content includes:</p> <ul> <li>Hardware components and their locations and markers</li> <li>Pinouts and jumpers for connections or configurations</li> <li>Solder Bridges for enabling/disabling features or hardware connections</li> </ul> </div> <div class="admonition tip"> <p class=admonition-title>MB1034 RevB.0 - STM32F0-DISCOVERY Schematic</p> <p><a href=https://my.st.com/resource/en/schematic_pack/stm32f0discovery_sch.zip>https://my.st.com/resource/en/schematic_pack/stm32f0discovery_sch.zip</a></p> <p>This document show the wires between all hardware components. Reading this document can help to understand:</p> <ul> <li>Input and Output characteristics (Pull-up, Pull-down, Open, Voltage level)</li> <li>Connection points (internal wires, connectors)</li> <li>Working conditions (Power level, Votage Level torelance)</li> </ul> </div> <h3 id=processor-datasheet>Processor Datasheet<a class=headerlink href=#processor-datasheet title="Permanent link">⚓︎</a></h3> <div class="admonition tip"> <p class=admonition-title>PM0215 - STM32F0xxx Cortex-M0 programming manual</p> <p><a href=https://my.st.com/resource/en/programming_manual/dm00051352-stm32f0xxx-cortexm0-programming-manual-stmicroelectronics.pdf>https://my.st.com/resource/en/programming_manual/dm00051352-stm32f0xxx-cortexm0-programming-manual-stmicroelectronics.pdf</a></p> <p>The main content is:</p> <ul> <li>Processor modes: in application and interruption routine</li> <li>Stacks: manage context's data</li> <li>Core Registers: contain instruaction's data and result, system status</li> <li>Memory Model: fixed memory map with address ranges</li> <li>Vector Table: start address, stack pointer, and interruption handlers</li> <li>Sleep mode: condition about clock, data rate, regiter mode</li> <li>Instruction set: assembly mnemonic for instructions</li> <li>Core registers: Address and Name of registers used in core and peripherals. This is the based for progamming the processor. It also have API function name for accessing the registers using CMSIS.</li> </ul> </div> <div class="admonition tip"> <p class=admonition-title>DS8668 - STM32F051x4/6/8 Datasheet</p> <p><a href=https://www.st.com/resource/en/datasheet/stm32f051r8.pdf>https://www.st.com/resource/en/datasheet/stm32f051r8.pdf</a></p> <p>This document shows below information:</p> <ul> <li>Functional features</li> <li>Memory Mapping, Boot Mode</li> <li>Pinouts and altenative functions</li> <li>Core and Peripherals' diagrams, protocols</li> </ul> </div> <div class="admonition tip"> <p class=admonition-title>RM0091 - Reference manual for STM32F0x1/STM32F0x2/STM32F0x8 advanced ARM-based 32-bit MCUs</p> <p><a href=https://www.st.com/resource/en/reference_manual/dm00031936-stm32f0x1stm32f0x2stm32f0x8-advanced-armbased-32bit-mcus-stmicroelectronics.pdf>https://www.st.com/resource/en/reference_manual/dm00031936-stm32f0x1stm32f0x2stm32f0x8-advanced-armbased-32bit-mcus-stmicroelectronics.pdf</a></p> <p><mark>This is a very important document as it defines all register structure, bit-fields to control core and peripherals</mark>. This document includes:</p> <ul> <li>System Architecture, Register-Level designs</li> <li>Memory Mapping and Boot configuration</li> <li>Register name and bit-fields for all accessible registers</li> </ul> </div> <h3 id=library-manual>Library Manual<a class=headerlink href=#library-manual title="Permanent link">⚓︎</a></h3> <div class="admonition tip"> <p class=admonition-title>UM1785 - Description of STM32F0 HAL and low-layer drivers</p> <p><a href=https://www.st.com/resource/en/user_manual/dm00122015-description-of-stm32f0-hal-and-lowlayer-drivers-stmicroelectronics.pdf>https://www.st.com/resource/en/user_manual/dm00122015-description-of-stm32f0-hal-and-lowlayer-drivers-stmicroelectronics.pdf</a></p> <p>This document describes HAL and LL APIs for programming. Those functions wrap all internal registers and settings, and create a friendly function names and data structure for developer. The HAL drivers include a set of driver modules, each module being linked to a standalone peripheral.</p> <p>The HAL main features are the following:</p> <ul> <li>Cross-family portable set of APIs covering the common peripheral features as well as extension APIs in case of specific peripheral features.</li> <li>Three API programming models: polling, interrupt and DMA.</li> <li>APIs are RTOS compliant:</li> <li>Fully reentrant APIs</li> <li>Systematic usage of timeouts in polling mode</li> <li>Support of peripheral multi-instance allowing concurrent API calls for multiple instances of a given peripheral (USART1, USART2...)</li> <li>All HAL APIs implement user-callback functions mechanism:</li> <li>Peripheral Init/DeInit HAL APIs can call user-callback functions to perform peripheral system level. Initialization/De-Initialization (clock, GPIOs, interrupt, DMA)</li> <li>Peripherals interrupt events</li> <li>Error events</li> <li>Object locking mechanism: safe hardware access to prevent multiple spurious accesses to shared resources</li> <li>Timeout used for all blocking processes: the timeout can be a simple counter or a timebase</li> </ul> </div> <div class="admonition tip"> <p class=admonition-title>UM1722 - Developing applications on STM32Cube with RTOS</p> <p><a href=https://www.st.com/resource/en/user_manual/dm00105262-developing-applications-on-stm32cube-with-rtos-stmicroelectronics.pdf>https://www.st.com/resource/en/user_manual/dm00105262-developing-applications-on-stm32cube-with-rtos-stmicroelectronics.pdf</a></p> <p>This document is a reference to program user application in RTOS. This document has below content:</p> <ul> <li>FreeRTOS: overview, APIs, memory management, low power managementm, and configuration</li> <li>CMSIS-RTOS: a higher layer to communicate between CMSIS and FreeRTOS</li> <li>Usage to create thread, use Semaphore, Queues, and Timer</li> </ul> </div> <div class="admonition tip"> <p class=admonition-title>CMSIS - Cortex Microcontroller Software Interface Standard</p> <p><a href=https://developer.arm.com/tools-and-software/embedded/cmsis>https://developer.arm.com/tools-and-software/embedded/cmsis</a></p> <p><a href=https://developer.arm.com/embedded/cmsis/cmsis-packs/devices/STMicroelectronics/STM32F051R8>https://developer.arm.com/embedded/cmsis/cmsis-packs/devices/STMicroelectronics/STM32F051R8</a></p> <p>ARM develops the Cortex Microcontroller Software Interface Standard (CMSIS) to allow microcontroller and software vendor to use a consistent software infrastructure to develop software solutions for Cortex-M microcontroller. It is a set of APIs for application or middleware developers to access the features on the Cortex-M processor regardless of the microcontroller devices or toolchain used.</p> <p>To use the CMSIS-Core (Cortex-M) the following files are added to the embedded application:</p> <ul> <li>Startup File <code>startup_&lt;device&gt;.c</code> with reset handler and exception vectors.</li> <li>System Configuration Files <code>system_&lt;device&gt;.c</code> and <code>system_&lt;device&gt;.h</code> with general device configuration (i.e. for clock and BUS setup).</li> <li>Device Header File <code>&lt;device.h&gt;</code> gives access to processor core and all peripherals. <mark>Register names and bit-fields are defined in the Reference Manual of the process</mark></li> </ul> </div> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">⚓︎</a></h2> <p>By reading to this point, I hope you can get an overview of what STM32 MCUs are, how to run a simple project with STM32CubeIDE, and where to find more information about your target MCUs.</p> <div style="height: 5vh;"></div> <div class=reference> <h2>References</h2> <small><em>Here is the list of documents I've read and learned from. As mentioned that this is my personal blog, so I'd like to rephrase or copy some paragraphs, images from the original sources, in order to take notes faster while keeping the main ideas. In that case, credits belong to the original authors. </em></small> <ul> <li> <strong>Mastering STM32</strong>, <a href=http://leanpub.com/mastering-stm32>http://leanpub.com/mastering-stm32</a> </li> </ul> </div> </div> <div style="height: 5vh;"></div> <div id=disqus_section> <h2 id=__comments>Comments</h2> <div id=disqus_thread></div> <script>var disqus_config=function(){this.page.url="https://www.codeinsideout.com/posts/stm32/intro/",this.page.identifier="posts/stm32/intro/"};window.addEventListener("load",function(){var e=document,i=e.createElement("script");i.src="//vuquangtrong-github-io.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)})</script> </div> <a id=back-to-top> <span class=twemoji id=back-top-top-indicator> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"> </path> </svg> </span> </a> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../markdown_syntax/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Markdown Syntax </div> </div> </a> <a href=../semihost/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Semihosting on ARM MCUs </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> © 2020 <a href=https://www.codeinsideout.com/ >Code Inside Out</a> </div> using <a href=https://github.com/vuquangtrong/mkdocs-material-blog>Blog for Material MkDocs</a> theme </div> <div class=md-footer-links> <div class=md-footer-social> <a href=https://github.com/vuquangtrong target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://facebook.com/trongvq target=_blank rel=noopener title=facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> <a href=https://www.linkedin.com/in/vqtrong target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </div> </footer> </div> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script> <script src=../../../assets/javascripts/vendor.fd16492e.min.js></script> <script src=../../../assets/javascripts/bundle.7836ba4d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script type=application/javascript src=../../../javascripts/base.js></script> <script type=application/javascript src=../../../javascripts/main.js></script> </body> </html>